---
import Layout from "./_layout.astro";
import { GithubBlog } from "@rena.to/github-blog";
import Article from "../components/article.astro";

const blog = new GithubBlog({
  repo: "rootenginear/my-common-patterns",
  token: import.meta.env.TOKEN,
});

const posts = await blog.getPosts({
  query: { type: "post", state: "published" },
  pager: { limit: 100 },
});

const slugs = posts.edges.map((post) => post.post.labels.slug?.[0]);
---

<Layout>
  {slugs.map((slug) => slug && <Article slug={slug} />)}
</Layout>
